0000:                 * Convert 32-bits binary number to decimal.
0000:                         org $400
0400:                         
0400: 10CE8000        main    lds #$8000
0404: 8E0496                  ldx #num1
0407: BD0429                  jsr prtdec
040A: 8E049A                  ldx #num2
040D: BD0429                  jsr prtdec
0410: 8E049E                  ldx #num3
0413: BD0429                  jsr prtdec
0416: 8E04A2                  ldx #num4
0419: BD0429                  jsr prtdec
041C: 8E04A6                  ldx #num5
041F: BD0429                  jsr prtdec
0422: 8E04AA                  ldx #num6
0425: BD0429                  jsr prtdec
0428: 3F                      swi
0429:                 
0429:                 
0429:                 * Print double number (including leading zeros)  pointed to by X. 
0429:                 * Number at that location is destroyed by the process.
0429: BD045A          prtdec  jsr bin2bcd     ;Convert to bcd
042C: 8E048F                  ldx #bcdbuf     ;Traverse 5-byte buffer.
042F: C605                    ldb #5
0431: F70494                  stb temp
0434: A680            pdloop  lda ,x+         
0436: 1F89                    tfr a,b         
0438: 54                      lsrb
0439: 54                      lsrb
043A: 54                      lsrb
043B: 54                      lsrb            ;Extract higher digit from bcd byte.
043C: CB30                    addb #'0
043E: BD048C                  jsr outch
0441: 1F89                    tfr a,b
0443: C40F                    andb #15        ;Extract lower digit.
0445: CB30                    addb #'0
0447: BD048C                  jsr outch
044A: 7A0494                  dec temp
044D: 26E5                    bne pdloop
044F: C60D                    ldb #13         ;output newline.
0451: BD048C                  jsr outch
0454: C60A                    ldb #10
0456: BD048C                  jsr outch
0459: 39                      rts
045A:                 
045A:                 * Convert 4-byte number pointed to by X to 5-byte (10 digit) bcd.
045A: CE048F          bin2bcd ldu #bcdbuf
045D: C605                    ldb #5
045F: 6FC0            bbclr   clr ,u+         ;Clear the 5-byte bcd buffer.
0461: 5A                      decb
0462: 26FB                    bne bbclr
0464: C604                    ldb #4          ;traverse 4 bytes of bin number 
0466: F70494                  stb temp
0469: C608            bbloop  ldb #8          ;and 8 bits of each byte. (msb to lsb)
046B: F70495                  stb temp2
046E: 6984            bbl1    rol ,x          ;Extract next bit from binary number.
0470: C605                    ldb #5
0472: CE0494                  ldu #bcdbuf+5
0475: A6C2            bbl2    lda ,-u         ;multiply bcd number by 2 and add extracted bit
0477: A9C4                    adca ,u         ;into it. 
0479: 19                      daa
047A: A7C4                    sta ,u
047C: 5A                      decb
047D: 26F6                    bne bbl2
047F: 7A0495                  dec temp2
0482: 26EA                    bne bbl1
0484: 3001                    leax 1,x
0486: 7A0494                  dec temp
0489: 26DE                    bne bbloop
048B: 39                      rts
048C:                 
048C:                 * Output character B 
048C: 9D03            outch   jsr 3
048E: 39                      rts
048F:                 
048F:                 bcdbuf  rmb 5
0494:                 temp    rmb 1
0495:                 temp2   rmb 1
0496:                 
0496: FFFFFFFF        num1    fdb -1,-1       ; should be 4294967295
049A: 00000000        num2    fdb 0,0         ; should be 0000000000
049E: 80000000        num3    fdb 32768,0     ; should be 2147483648
04A2: 3B9AC9FF        num4    fdb $3b9A,$c9ff ; should be 0999999999
04A6: 3B9ACA00        num5    fdb $3b9a,$ca00 ; should be 1000000000
04AA: 0000157D        num6    fdb 0,5501      ; should be 0000005501
0 Pass 2 errors.

SYMBOL TABLE
     BBCLR 02 045f      BBL1 02 046e      BBL2 02 0475    BBLOOP 02 0469
    BCDBUF 02 048f   BIN2BCD 02 045a      MAIN 02 0400      NUM1 02 0496
      NUM2 02 049a      NUM3 02 049e      NUM4 02 04a2      NUM5 02 04a6
      NUM6 02 04aa     OUTCH 02 048c    PDLOOP 02 0434    PRTDEC 02 0429
      TEMP 02 0494     TEMP2 02 0495
